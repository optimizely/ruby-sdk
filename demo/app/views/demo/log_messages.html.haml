-#
-# Copyright 2017, Optimizely and contributors
-#
-# Licensed under the Apache License, Version 2.0 (the "License");
-# you may not use this file except in compliance with the License.
-# You may obtain a copy of the License at
-#
-#    http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-#

.container
  / Example row of columns
  = render "shared/tabs"
  .row
    = link_to 'Clear Messages',
    delete_messages_path,
    method: :delete,
    data: { confirm: 'Are you sure? want to delete all log messages!' },
    class:"btn btn-danger #{!@logs.present? ? 'disabled' : ''}"
  %br
  .row
    %table#example.table.table-sm
      %thead
        %tr
          %th Timestamp
          %th Type
          %th Message
      %tbody
        - @logs.each do |log|
          %tr{class:"#{get_level_class(log.type)}"}
            %td
              = log.created_at.present? ? log.created_at.strftime("%m/%d/%Y at %I:%M %p") : ""
            %td
              = "LOG #{LogMessage::LOGGER_LEVELS.key(log.type)}"
            %td
              = log.message

:javascript
  $(document).ready(function() {
    $('#example').dataTable({
      'bSort': false
    });
  });